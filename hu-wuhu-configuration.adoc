---
sidebar: sidebar 
permalink: hu-wuhu-configuration.html 
keywords: windows, host, utilities, 7.1, hba, fibre, channel, SANtricity, netapp, san, host, e-series, platform 
summary: Os Utilitários de host do Windows incluem um programa de instalação que define os parâmetros necessários do Registro do Windows e do HBA para que o host do Windows manipule corretamente os comportamentos do sistema de storage para plataformas ONTAP e e-Series. 
---
= Analise a configuração dos Utilitários de Host do Windows para armazenamento ONTAP.
:toc: macro
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/
:toc-position: content


[role="lead"]
Os utilitários do host Windows exigem determinadas configurações de registro e parâmetros para que um host Windows lide corretamente com o comportamento do sistema de armazenamento ONTAP .

Esses valores de registro e parâmetros afetam a forma como um host Windows responde a um atraso ou perda de dados, por exemplo, lidando corretamente com eventos como uma falha de armazenamento.

Alguns valores de registro e parâmetros não se aplicam ao módulo específico do dispositivo (DSM) do SANtricity Storage Manager. A sobreposição entre os valores definidos pelos utilitários do host do Windows e pelo DSM do SANtricity Storage Manager não causa conflitos.

Um host Windows também requer determinados parâmetros FC, NVMe/FC e HBA iSCSI para lidar com sucesso com eventos do sistema de armazenamento:

* A partir da versão 7.2 do Windows Host Utilities, o instalador define os parâmetros do Windows, iSCSI, FC e NVMe/FC para os valores suportados.
* A partir da versão 7.1 do Windows Host Utilities, o instalador define os parâmetros do Windows, FC e NVMe/FC HBA para os valores suportados. Você precisa configurar manualmente os parâmetros do HBA iSCSI.


O instalador define valores diferentes quando você especifica o suporte ao Microsoft Multipath I/O (MPIO) durante a instalação.

[NOTE]
====
Você precisa alterar o valor do parâmetro LimTransferSize após instalar o Windows Host Utilities 7.2. Ver <<nvme_parameter,Parâmetros NVME>> .

Para todos os outros parâmetros e chaves de registro do Windows Host Utilities 8.0, 7.2 ou 7.1, você não precisa alterar os valores, a menos que o suporte técnico o recomende.

====


== Analise as configurações do Windows Host Utilities 8.0.

O instalador do Windows Host Utilities define automaticamente os valores do registro do Windows e os parâmetros do HBA iSCSI e NVMe com base nas opções selecionadas durante a instalação. Analise esses valores e a versão do sistema operacional.

[role="tabbed-block"]
====
.Valores do registro do Windows
--
Todos os valores do registro do Windows estão em decimal, a menos que seja indicado o contrário.


NOTE: HKLM é a abreviatura `HKEY_LOCAL_MACHINE` de .

[cols="20,20,30"]
|===
| Chave de registo | Valor | Definir chave de registro... 


| HKLM SYSTEM/CurrentControlSet/Services parâmetros DsmMaximumRetryTimeDuringStateTransition | 120 | Quando o suporte MPIO é especificado e seu servidor é Windows Server 2025, 2022, 2019 ou 2016 


| HKLM SYSTEM/CurrentControlSet Serviços/msdsmsm parâmetros DsmMaximumStateTransitionTime | 120 | Quando o suporte MPIO é especificado e seu servidor é Windows Server 2025, 2022, 2019 ou 2016 


| HKLM/SYSTEM/CurrentControlSet/Services/DsmSupportedDeviceList | "NETAPP LUN", "NETAPP LUN C-Mode" "NVMe NetApp ONTAP Con" | Quando o suporte MPIO é especificado 


| Parâmetros do SISTEMA HKLM/CurrentControlSet/Services/ClusterDisk/ManageDisksOnSystemBuses | 1 | Sempre 


| Parâmetros de ID_instância_ID_de_instância_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro | 30 | Sempre 


| HKLM/SYSTEM/CurrentControlSet/Control/MPDEV/MPIOSupportedDeviceList | "NETAPP LUN", "NETAPP LUN C-Mode", "NVMe NetApp ONTAP Con" | Quando o suporte MPIO é especificado 


| Parâmetros/PathRecoveryInterval | 30 | Quando seu servidor for Windows Server 2025, 2022, 2019 ou 2016 


| HKLM/SYSTEM/CurrentControlSet/Services/mpio parâmetros/PathVerifyEnabled | 1 | Quando o suporte MPIO é especificado 


| HKLM/SYSTEM/CurrentControlSet/Services/PathVerifyEnabled | 1 | Quando o suporte MPIO é especificado e seu servidor é Windows Server 2025, 2022, 2019 ou 2016 


| HKLM/SYSTEM/CurrentControlSet/Services/Vnetapp/Parameters/PathVerifyEnabled | 0 | Quando o suporte MPIO é especificado 


| HKLM SYSTEM/CurrentControlSet/Services/mpio/Parameters/PDORemovePeriod | 130 | Quando o suporte MPIO é especificado 


| Parâmetros do PDORemovePeriod | 130 | Quando o suporte MPIO é especificado e seu servidor é Windows Server 2025, 2022, 2019 ou 2016 


| Parâmetros do PDORemovePeriod | 130 | Quando o suporte MPIO é especificado 


| Parâmetros/RetryCount | 6 | Quando o suporte MPIO é especificado 


| Parâmetros/RetryCount | 6 | Quando o suporte MPIO é especificado e seu servidor é Windows Server 2025, 2022, 2019 ou 2016 


| Parâmetros/intervalo de retoque | 1 | Quando o suporte MPIO é especificado 


| Parâmetros/RetryInterval | 1 | Quando o suporte MPIO é especificado e seu servidor é Windows Server 2025, 2022, 2019 ou 2016 


| Parâmetros/RetryInterval | 1 | Quando o suporte MPIO é especificado 


.2+| HKLM/SISTEMA/CurrentControlSet Serviços/disco/TimeOutValue | 120 | Quando nenhum suporte MPIO está selecionado 


| 60 | Quando o suporte MPIO é especificado 


| Parâmetros do UseCustomPathRecoveryInterval | 1 | Quando o suporte MPIO é especificado e seu servidor é Windows Server 2025, 2022, 2019 ou 2016 
|===
--
.Valores HBA do iSCSI
--
Todos os valores de HBA iSCSI estão em decimal, a menos que seja indicado o contrário.


NOTE: HKLM é a abreviatura `HKEY_LOCAL_MACHINE` de .

[cols="20,20,30"]
|===
| Chave de registo | Valor | Definir chave de registro... 


| Parâmetros IPSecConfigTimeout | 60 | Sempre 


| Os parâmetros de ID de instância são LinkDownTime | 10 | Sempre 


| Parâmetros de ID_instância_ID_de_instância_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro | 120 | Quando nenhum suporte MPIO está selecionado 
|===
--
.Parâmetros NVMe
--
O Windows Host Utilities 8.0 atualiza os seguintes parâmetros do driver NVMe Emulex durante a instalação:

* EnableNVMe: 1
* NVMEMode (modo NVMEMode): 0


--
====


== Analise as configurações do Windows Host Utilities 7.2.

O instalador do Windows Host Utilities define automaticamente os valores do registro do Windows e os parâmetros do HBA iSCSI e NVMe com base nas opções selecionadas durante a instalação. Analise esses valores e a versão do sistema operacional.

[#nvme_parameter,role="tabbed-block"]
====
.Valores do registro do Windows
--
Todos os valores do registro do Windows estão em decimal, a menos que seja indicado o contrário.


NOTE: HKLM é a abreviatura `HKEY_LOCAL_MACHINE` de .

[cols="20,20,30"]
|===
| Chave de registo | Valor | Definir chave de registro... 


| HKLM SYSTEM/CurrentControlSet/Services parâmetros DsmMaximumRetryTimeDuringStateTransition | 120 | Quando o suporte MPIO é especificado e o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 


| HKLM SYSTEM/CurrentControlSet Serviços/msdsmsm parâmetros DsmMaximumStateTransitionTime | 120 | Quando o suporte MPIO é especificado e o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 


| HKLM/SYSTEM/CurrentControlSet/Services/DsmSupportedDeviceList | "NETAPP LUN", "NETAPP LUN C-Mode" "NVMe NetApp ONTAP Con" | Quando o suporte MPIO é especificado 


| Parâmetros do SISTEMA HKLM/CurrentControlSet/Services/ClusterDisk/ManageDisksOnSystemBuses | 1 | Sempre 


| Parâmetros de ID_instância_ID_de_instância_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro | 30 | Sempre 


| HKLM/SYSTEM/CurrentControlSet/Control/MPDEV/MPIOSupportedDeviceList | "NETAPP LUN", "NETAPP LUN C-Mode", "NVMe NetApp ONTAP Con" | Quando o suporte MPIO é especificado 


| Parâmetros/PathRecoveryInterval | 30 | Quando o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 


| HKLM/SYSTEM/CurrentControlSet/Services/mpio parâmetros/PathVerifyEnabled | 1 | Quando o suporte MPIO é especificado 


| HKLM/SYSTEM/CurrentControlSet/Services/PathVerifyEnabled | 1 | Quando o suporte MPIO é especificado e o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 


| HKLM/SYSTEM/CurrentControlSet/Services/Vnetapp/Parameters/PathVerifyEnabled | 0 | Quando o suporte MPIO é especificado 


| HKLM SYSTEM/CurrentControlSet/Services/mpio/Parameters/PDORemovePeriod | 130 | Quando o suporte MPIO é especificado 


| Parâmetros do PDORemovePeriod | 130 | Quando o suporte MPIO é especificado e o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 


| Parâmetros do PDORemovePeriod | 130 | Quando o suporte MPIO é especificado 


| Parâmetros/RetryCount | 6 | Quando o suporte MPIO é especificado 


| Parâmetros/RetryCount | 6 | Quando o suporte MPIO é especificado e o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 


| Parâmetros/intervalo de retoque | 1 | Quando o suporte MPIO é especificado 


| Parâmetros/RetryInterval | 1 | Quando o suporte MPIO é especificado e o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 


| Parâmetros/RetryInterval | 1 | Quando o suporte MPIO é especificado 


.2+| HKLM/SISTEMA/CurrentControlSet Serviços/disco/TimeOutValue | 120 | Quando nenhum suporte MPIO está selecionado 


| 60 | Quando o suporte MPIO é especificado 


| Parâmetros do UseCustomPathRecoveryInterval | 1 | Quando o suporte MPIO é especificado e o servidor é Windows Server 2025, 2022, 2019, 2016 ou 2012 R2 
|===
--
.Valores HBA do iSCSI
--
Todos os valores de HBA iSCSI estão em decimal, a menos que seja indicado o contrário.


NOTE: HKLM é a abreviatura `HKEY_LOCAL_MACHINE` de .

[cols="20,20,30"]
|===
| Chave de registo | Valor | Definir chave de registro... 


| Parâmetros IPSecConfigTimeout | 60 | Sempre 


| Os parâmetros de ID de instância são LinkDownTime | 10 | Sempre 


| Parâmetros de ID_instância_ID_de_instância_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro_de_Registro | 120 | Quando nenhum suporte MPIO está selecionado 
|===
--
.Parâmetros NVMe
--
O Windows Host Utilities 7.2 atualiza os seguintes parâmetros do driver NVMe Emulex durante a instalação:

* EnableNVMe: 1
* NVMEMode (modo NVMEMode): 0
* LimTransferSize 1
+
O parâmetro LimTransferSize é definido automaticamente como "1" ao instalar o Windows Host Utilities 7.2. Após a instalação, altere o valor de LimTransferSize para "0" e reinicie o servidor.



--
====


== Analise as configurações do Windows Host Utilities 7.1.

O instalador do Windows Host Utilities define automaticamente os valores do registro com base nas opções selecionadas durante a instalação. Analise esses valores de registro e a versão do sistema operacional. Todos os valores estão em decimal, a menos que seja indicado o contrário.


NOTE: `HKLM` é a abreviatura `HKEY_LOCAL_MACHINE` de .

[cols="~, 10, ~"]
|===
| Chave de registo | Valor | Definir chave de registro... 


| HKLM SYSTEM/CurrentControlSet/Services parâmetros DsmMaximumRetryTimeDuringStateTransition | 120 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2016, 2012 R2, 2012, 2008 R2 ou 2008, exceto se o Data ONTAP DSM for detetado 


| HKLM SYSTEM/CurrentControlSet/Services parâmetros DsmMaximumStateTransitionTime | 120 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2016, 2012 R2, 2012, 2008 R2 ou 2008, exceto se o Data ONTAP DSM for detetado 


.2+| Parâmetros/DsmSupportedDeviceList | "NETAPPLUN" | Quando o suporte MPIO é especificado 


| "NetApp LUN", "NetApp LUN C-Mode" | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| Verifique se a MENSAGEM de erro está correta | 60 | Sempre, exceto quando o Data ONTAP DSM é detetado 


| Verifique se a MENSAGEM de erro está ativada | 10 | Sempre 


| Parâmetros/ManageDisksOnSystemBuses | 1 | Sempre, exceto quando o Data ONTAP DSM é detetado 


.2+| Verifique se a MENSAGEM de erro está correta | 120 | Quando nenhum suporte MPIO está selecionado 


| 30 | Sempre, exceto quando o Data ONTAP DSM é detetado 


.2+| HKLM/SYSTEM/CurrentControlSet/MPDEV/MPIOSupportedDeviceList | "LUN NetApp" | Quando o suporte MPIO é especificado 


| "NetApp LUN", "NetApp LUN C-Mode" | Quando o MPIO é especificado pelo suporte, exceto se o DSM Data ONTAP for detetado 


| Parâmetros/PathRecoveryInterval | 40 | Quando o servidor é apenas Windows Server 2008, Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2 ou Windows Server 2016 


| HKLM/SYSTEM/CurrentControlSet/Services/mpio parâmetros/PathVerifyEnabled | 0 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/msdssm parâmetros/PathVerifyEnabled | 0 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/PathVerifyEnabled | 0 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2016, 2012 R2, 2012, 2008 R2 ou 2008, exceto se o Data ONTAP DSM for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/PathVerifyEnabled | 0 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2003, exceto se o Data ONTAP DSM for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/vnetapp parâmetros/PathVerifyEnabled | 0 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| HKLM SYSTEM/CurrentControlSet/Services/mpio Parameters/PDORemovePeriod | 130 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| Parâmetros do PDORemovePeriod | 130 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2016, 2012 R2, 2012, 2008 R2 ou 2008, exceto se o Data ONTAP DSM for detetado 


| Parâmetros/PDORemovePeriod | 130 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2003, exceto se o Data ONTAP DSM for detetado 


| Parâmetros do PDORemovePeriod | 130 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/mpio/Parameters/RetryCount | 6 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| Parâmetros/RetryCount | 6 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2016, 2012 R2, 2012, 2008 R2 ou 2008, exceto se o Data ONTAP DSM for detetado 


| Parâmetros/RetryCount | 6 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2003, exceto se o Data ONTAP DSM for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/Vnetapp/Parameters/RetryCount | 6 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/mpio/Parameters/RetryInterval | 1 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/Parameters/RetryInterval | 1 | Quando o suporte MPIO é especificado e o seu servidor é Windows Server 2016, 2012 R2, 2012, 2008 R2 ou 2008, exceto se o Data ONTAP DSM for detetado 


| HKLM/SYSTEM/CurrentControlSet/Services/Vnetapp/Parameters/RetryInterval | 1 | Quando o suporte MPIO é especificado, exceto se o DSM Data ONTAP for detetado 


.2+| HKLM/SISTEMA/CurrentControlSet Serviços/disco/TimeOutValue | 120 | Quando nenhum suporte MPIO está selecionado 


| 60 | Quando o suporte MPIO é especificado 


| Parâmetros do UseCustomPathRecoveryInterval | 1 | Quando o servidor é Windows Server 2016, 2012 R2, 2012, 2008 R2 ou 2008 
|===
Consulte https://docs.microsoft.com/en-us/troubleshoot/windows-server/performance/windows-registry-advanced-users["Documentos da Microsoft"^] a para obter os detalhes dos parâmetros do registo.



== Saiba mais sobre os valores FC HBA definidos pelos utilitários de host do Windows.

O instalador do Windows Host Utilities define os valores de tempo limite necessários para HBAs Emulex e QLogic FC em sistemas que usam FC.

O instalador define os seguintes parâmetros para os HBAs do Emulex FC:

[role="tabbed-block"]
====
.Quando você seleciona MPIO
--
|===
| Tipo de propriedade | Valor da propriedade 


| LinkTimeOut | 1 


| NodeTimeOut | 10 
|===
--
.Quando você não seleciona MPIO
--
|===
| Tipo de propriedade | Valor da propriedade 


| LinkTimeOut | 30 


| NodeTimeOut | 120 
|===
--
====
O instalador define os seguintes parâmetros para QLogic FC HBAs:

[role="tabbed-block"]
====
.Quando você seleciona MPIO
--
|===
| Tipo de propriedade | Valor da propriedade 


| LinkDownTimeOut | 1 


| PortDownRetryCount | 10 
|===
--
.Quando você não seleciona MPIO
--
|===
| Tipo de propriedade | Valor da propriedade 


| LinkDownTimeOut | 30 


| PortDownRetryCount | 120 
|===
--
====

NOTE: Os nomes dos parâmetros podem variar ligeiramente dependendo do programa. Por exemplo, no programa QLogic QConvergeConsole, o parâmetro é exibido como `Link Down Timeout`. Os utilitários do host `fcconfig.ini` O arquivo exibe esse parâmetro como uma das seguintes opções: `LinkDownTimeOut` ou `MpioLinkDownTimeOut`, dependendo se o MPIO estiver especificado. No entanto, todos esses nomes se referem ao mesmo parâmetro HBA. Ver https://www.broadcom.com/support/download-search["Emulex"^] ou https://driverdownloads.qlogic.com/QLogicDriverDownloads_UI/Netapp_search.aspx["QLogic"^] Para saber mais sobre os parâmetros de tempo limite.



== Saiba mais sobre as alterações do Host Utilities nas configurações do driver FC HBA

Durante a instalação dos drivers HBA Emulex ou QLogic necessários em um sistema FC, o Utilitário de Host do Windows verifica diversos parâmetros e, em alguns casos, os modifica.

O Windows Host Utilities define valores para os seguintes parâmetros se o MS DSM para Windows MPIO for detectado:

* *LinkTimeOut*: define o tempo em segundos que a porta do host aguarda antes de retomar a E/S após um link físico estar inativo.
* *NodeTimeOut*: define o tempo em segundos antes que a porta do host reconheça que uma conexão com o dispositivo de destino está inativa.


Ao solucionar problemas com o HBA, verifique se essas configurações possuem os valores corretos. Os valores corretos dependem de dois fatores:

* O fornecedor HBA
* Se você estiver usando o software MPIO.


Você pode corrigir as configurações do HBA porlink:hu_wuhu_repair_remove.html["executando a opção Reparar"] no instalador do Windows Host Utilities.

[role="tabbed-block"]
====
.Emulex HBA drivers
--
Verifique as configurações do driver HBA Emulex em sistemas FC. Essas configurações devem existir para cada porta no HBA.

.Passos
. Abra o Gerenciador de OnCommand.
. Selecione o HBA apropriado na lista e selecione a aba *Parâmetros do Driver*.
+
São apresentados os parâmetros do condutor.

+
.. Se estiver a utilizar o software MPIO, certifique-se de que tem as seguintes definições de controlador:
+
*** Jogue LinkTimeOut online grátis - 1
*** NodeTimeOut - 10


.. Se você não estiver usando o software MPIO, certifique-se de ter as seguintes configurações de driver:
+
*** Jogue LinkTimeOut online grátis - 30
*** NodeTimeOut - 120






--
.Drivers QLogic HBA
--
Verifique as configurações do driver QLogic HBA em sistemas FC. Essas configurações devem existir para cada porta no HBA.

.Passos
. Abra o QConvergeConsole e selecione *Conectar* na barra de ferramentas.
+
A caixa de diálogo *conetar ao host* é exibida.

. Selecione o host apropriado na lista e, em seguida, selecione *Connect*.
+
Uma lista de HBAs é exibida no painel HBA FC.

. Selecione a porta HBA apropriada na lista e, em seguida, selecione a guia *Configurações*.
. Selecione *Advanced HBA Port Settings* na seção *Select Settings*.
. Se você estiver usando o software MPIO, verifique se você tem as seguintes configurações de driver:
+
** Link Down Timeout (linkdwnto) - 1
** Port Down Retry Count (portdwnrc) - 10


. Se você não estiver usando o software MPIO, verifique se possui as seguintes configurações de driver:
+
** Link Down Timeout (linkdwnto) - 30
** Port Down Retry Count (portdwnrc) - 120




--
====